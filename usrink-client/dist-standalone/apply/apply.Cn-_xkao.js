import{_ as Ge,b as S,e as C,f as m,g as s,j as o,p,l as i,F as H,A as J,m as k,n as w,k as u,P as Ke,y as M,u as He,w as Je,K as Qe,r as b,Q as We,s as x,o as Xe,E as h,R as Ze,I as $e,J as et,i as F,U as se}from"../3rdPlugin/3rdPlugin.CEm3-_ST.js";const tt={setup(){var fe;const E=He(),d=()=>{document.documentElement.lang=E.currentLang};d(),Je(()=>E.currentLang,d);const ne={我的电脑:{en:"My Computer",zh:"我的电脑"},名下电脑选择:{en:"Select PC",zh:"名下电脑选择"},电脑名称:{en:"PC Name",zh:"电脑名称"},NT账号:{en:"NT Account",zh:"NT账号"},部门号:{en:"Dept. ID",zh:"部门号"},姓:{en:"Last Name",zh:"姓"},名:{en:"First Name",zh:"名"},电脑使用状态:{en:"PC Status",zh:"电脑使用状态"},电脑归属情况:{en:"PC Ownership",zh:"电脑归属情况"},电脑情况备注:{en:"Notes",zh:"电脑情况备注"},出厂时间:{en:"Prod. Date",zh:"出厂时间"},暂无电脑信息:{en:"No PC info",zh:"暂无电脑信息"},制造商:{en:"Manufacturer",zh:"制造商"},型号:{en:"Model",zh:"型号"},资产标签:{en:"Asset Tag",zh:"资产标签"},IP地址:{en:"IP Address",zh:"IP地址"},MAC地址:{en:"MAC Address",zh:"MAC地址"},操作系统:{en:"OS",zh:"操作系统"},电脑申请:{en:"PC Application",zh:"电脑申请"},使用人:{en:"User",zh:"使用人"},请输入使用人:{en:"Enter username",zh:"请输入使用人"},未找到相关用户:{en:"No users found",zh:"未找到相关用户"},成本中心:{en:"Cost Center",zh:"成本中心"},请选择成本中心:{en:"Select cost center",zh:"请选择成本中心"},所属公司:{en:"Company",zh:"所属公司"},请选择所属公司:{en:"Select company",zh:"请选择所属公司"},责任人:{en:"Owner",zh:"责任人"},请选择责任人:{en:"Select owner",zh:"请选择责任人"},申请类别:{en:"App. Type",zh:"申请类别"},请选择申请类别:{en:"Select app. type",zh:"请选择申请类别"},电脑类型:{en:"PC Type",zh:"电脑类型"},请选择电脑类型:{en:"Select PC type",zh:"请选择电脑类型"},电脑情形:{en:"PC Condition",zh:"电脑情形"},新电脑:{en:"New",zh:"新电脑"},库存旧电脑:{en:"Used",zh:"库存旧电脑"},公司系统:{en:"Company Sys",zh:"公司系统"},"是（公司系统）":{en:"Yes (Co. Sys)",zh:"是（公司系统）"},"否（非标系统）":{en:"No (Non-std)",zh:"否（非标系统）"},申请理由:{en:"Reason",zh:"申请理由"},请输入申请理由:{en:"Enter reason",zh:"请输入申请理由"},请输入其他用途电脑申请理由:{en:"Enter special purpose reason",zh:"请输入其他用途电脑申请理由"},提交申请:{en:"Submit",zh:"提交申请"},重置:{en:"Reset",zh:"重置"},办公电脑超六年换新:{en:"PC Renewal (>6y)",zh:"办公电脑超六年换新"},办公电脑未超六年换新:{en:"PC Renewal (<6y)",zh:"办公电脑未超六年换新"},办公电脑未超六年换旧:{en:"PC Used Replacement",zh:"办公电脑未超六年换旧"},秘书代申请新岗位员工电脑:{en:"New Employee PC",zh:"秘书代申请新岗位员工电脑"},秘书代申请替代岗位员工电脑:{en:"Replacement PC",zh:"秘书代申请替代岗位员工电脑"},"秘书代申请新实习生/外服电脑":{en:"Intern/Contractor PC",zh:"秘书代申请新实习生/外服电脑"},其他用途电脑申请:{en:"Special Purpose",zh:"其他用途电脑申请"},我的申请状态:{en:"My Application Status",zh:"我的申请状态"},刷新:{en:"Refresh",zh:"刷新"},申请时间:{en:"Application Time",zh:"申请时间"},更新时间:{en:"Update Time",zh:"更新时间"},状态:{en:"Status",zh:"状态"},操作:{en:"Actions",zh:"操作"},查看详情:{en:"View Details",zh:"查看详情"},申请新电脑:{en:"New Computer Application",zh:"申请新电脑"},审批通过:{en:"Approved",zh:"审批通过"},审批不通过:{en:"Rejected",zh:"审批不通过"},审批中:{en:"Under Review",zh:"审批中"},已通过:{en:"Approved",zh:"已通过"},已驳回:{en:"Rejected",zh:"已驳回"},分配中:{en:"Assigning",zh:"分配中"},分配完成:{en:"Assigned",zh:"分配完成"},暂分配:{en:"Temporarily Assigned",zh:"暂分配"},审批进度:{en:"Approval Progress",zh:"审批进度"},已提交:{en:"Submitted",zh:"已提交"},审批人1:{en:"Approver 1",zh:"审批人1"},审批人2:{en:"Approver 2",zh:"审批人2"},完成:{en:"Completed",zh:"完成"},"上一级审批不通过，审批流程终止":{en:"Previous approval rejected, process terminated",zh:"上一级审批不通过，审批流程终止"},待审批:{en:"Pending Approval",zh:"待审批"},暂无审批:{en:"No Approver",zh:"暂无审批"},暂无批准:{en:"No Approver",zh:"暂无批准"},当前状态:{en:"Current Status",zh:"当前状态"},关闭:{en:"Close",zh:"关闭"},分配进度:{en:"Assignment Progress",zh:"分配进度"},设备正在分配中:{en:"Device is being assigned",zh:"设备正在分配中"},设备暂时分配:{en:"Device is temporarily assigned",zh:"设备暂时分配"},设备已完成分配:{en:"Device has been assigned",zh:"设备已完成分配"},申请人:{en:"Applicant",zh:"申请人"},申请类别:{en:"Application Type",zh:"申请类别"},电脑类型:{en:"Computer Type",zh:"电脑类型"},成本中心:{en:"Cost Center",zh:"成本中心"},所属公司:{en:"Company",zh:"所属公司"},责任人:{en:"Responsible Person",zh:"责任人"},电脑情形:{en:"Computer Condition",zh:"电脑情形"},公司系统:{en:"Company System",zh:"公司系统"},有效期:{en:"Valid Until",zh:"有效期"},更新时间:{en:"Update Time",zh:"更新时间"},申请理由:{en:"Application Reason",zh:"申请理由"},查看审批进度:{en:"View Approval Progress",zh:"查看审批进度"},查看分配进度:{en:"View Assignment Progress",zh:"查看分配进度"},请选择申请类别:{en:"Please select application type",zh:"请选择申请类别"},请选择电脑类型:{en:"Please select computer type",zh:"请选择电脑类型"},请选择成本中心:{en:"Please select cost center",zh:"请选择成本中心"},请选择所属公司:{en:"Please select company",zh:"请选择所属公司"},请输入使用人的NT账号或姓名:{en:"Please enter user's NT account or name",zh:"请输入使用人的NT账号或姓名"},请选择责任人:{en:"Please select responsible person",zh:"请选择责任人"},请选择或输入申请理由:{en:"Please select or enter application reason",zh:"请选择或输入申请理由"},请完成表单填写:{en:"Please complete the form",zh:"请完成表单填写"},"获取用户信息失败，请手动填写":{en:"Failed to get user info, please fill in manually",zh:"获取用户信息失败，请手动填写"},"当前电脑归属情况为Public Use，已自动设置为其他用途电脑申请且无法修改":{en:"Current computer ownership is Public Use, automatically set to Special Purpose and cannot be changed",zh:"当前电脑归属情况为Public Use，已自动设置为其他用途电脑申请且无法修改"},"未找到当前电脑的出厂时间信息，无法判断使用年限":{en:"Production date information not found, unable to determine usage period",zh:"未找到当前电脑的出厂时间信息，无法判断使用年限"},获取电脑信息失败:{en:"Failed to get computer information",zh:"获取电脑信息失败"},申请提交成功:{en:"Application submitted successfully",zh:"申请提交成功"},申请提交失败:{en:"Application submission failed",zh:"申请提交失败"},"需要更换的电脑未超过6年，该电脑更换费用将计入电脑使用人所属部门的成本中心":{en:"The computer to be replaced is less than 6 years old. The replacement cost will be charged to the user's department cost center",zh:"需要更换的电脑未超过6年，该电脑更换费用将计入电脑使用人所属部门的成本中心"},费用提示:{en:"Cost Note",zh:"费用提示"},年限不符合要求:{en:"Age requirement not met",zh:"年限不符合要求"},用户名不能为空:{en:"Username cannot be empty",zh:"用户名不能为空"},已切换到用户:{en:"Switched to user",zh:"已切换到用户"},获取用户数据失败:{en:"Failed to get user data",zh:"获取用户数据失败"},已更新用户信息和电脑:{en:"Updated user info and computer",zh:"已更新用户信息和电脑"},已切换到电脑:{en:"Switched to computer",zh:"已切换到电脑"},但用户信息更新失败:{en:"but user info update failed",zh:"但用户信息更新失败"},无法解析电脑生命周期开始日期:{en:"Cannot parse computer lifecycle start date",zh:"无法解析电脑生命周期开始日期"},"无法确定电脑使用年限，请联系IT部门":{en:"Cannot determine computer usage period, please contact IT department",zh:"无法确定电脑使用年限，请联系IT部门"},确定:{en:"Confirm",zh:"确定"},处理中:{en:"Processing",zh:"处理中"},获取审批进度失败:{en:"Failed to get approval progress",zh:"获取审批进度失败"},提交的申请数据:{en:"Submitted application data",zh:"提交的申请数据"},提交申请失败:{en:"Application submission failed",zh:"提交申请失败"},电脑归属情况:{en:"PC Ownership",zh:"电脑归属情况"},上一页:{en:"Previous",zh:"上一页"},下一页:{en:"Next",zh:"下一页"},前往:{en:"Go to",zh:"前往"},页:{en:"Page",zh:"页"},共:{en:"Total",zh:"共"},条:{en:"items",zh:"条"},更新时间:{en:"Update Time",zh:"更新时间"},审批理由:{en:"Approval Reason",zh:"审批理由"},使用人:{en:"User",zh:"使用人"},请输入使用人的NT账号或姓名:{en:"Enter user's NT account or name",zh:"请输入使用人的NT账号或姓名"},未找到相关用户:{en:"No users found",zh:"未找到相关用户"}},e=Qe(),z=b(((fe=e.userInfo)==null?void 0:fe.userName)||""),c=t=>ne[t]&&ne[t][E.currentLang]||t,l=We({applicationType:"",deviceType:"",costCenter:"",company:"",user:z.value,responsible:"",computerCondition:"新电脑",companySys:"是（公司系统）",reason:"",ciName:"申请新电脑"}),Y={applicationType:[{required:!0,message:x(()=>c("请选择申请类别")),trigger:"change"}],deviceType:[{required:!0,message:x(()=>c("请选择电脑类型")),trigger:"change"}],costCenter:[{required:!0,message:x(()=>c("请选择成本中心")),trigger:"change"}],company:[{required:!0,message:x(()=>c("请选择所属公司")),trigger:"change"}],user:[{required:!0,message:x(()=>c("请输入使用人的NT账号或姓名")),trigger:"blur"}],responsible:[{required:!0,message:x(()=>c("请选择责任人")),trigger:"change"}],reason:[{required:!0,message:x(()=>c("请选择或输入申请理由")),trigger:"change"}]},f=b(null),Q=b([]),q=b(!1),W=b(!1),P=b([]),U=b(0),L=b(!1),G=b([]),X=b(0),O=b(["IT"]),R=b([]),$=b([]),T=b([]),V=b(!1),ee=b(null);b(null);const D=b([]),N=b(""),B=b(1),K=b(10),n=b(0),_=b([]),ce=t=>t?t.includes("T")?t.split("T")[0]:t:"",Z=t=>t?F({method:"get",url:"/sysApply/getUserInfoByUserName",params:{userName:t}}).then(a=>{if(a.data){if(a.data.costCenter&&(l.costCenter=a.data.costCenter,O.value.includes(a.data.costCenter)||O.value.push(a.data.costCenter)),a.data.company){const v=["SGCS","SGCC","SES"].find(y=>y.toLowerCase()===a.data.company.toLowerCase());v?l.company=v:(l.company=a.data.company,R.value.includes(a.data.company)||R.value.push(a.data.company))}a.data.responsibility&&(l.responsible=a.data.responsibility,$.value.includes(a.data.responsibility)||$.value.push(a.data.responsibility))}return a}).catch(a=>(h({type:"warning",message:c("获取用户信息失败，请手动填写")}),Promise.reject(a))):Promise.reject(new Error(c("用户名为空"))),be=t=>{ee.value&&clearTimeout(ee.value),ee.value=setTimeout(()=>{t&&t.trim()!==""?he():V.value=!1},500)},Ce=()=>{setTimeout(()=>{V.value=!1},200)},_e=()=>{const t=l.user.trim();if(!t){h.warning(c("用户名不能为空"));return}t!==z.value&&t!==z.value&&(l.applicationType="",l.reason="",g.value=null,D.value=[],N.value="",l.ciName="申请新电脑",oe(t).then(()=>re(t)).then(()=>(g.value&&g.value.ciName&&(D.value.includes(g.value.ciName)||D.value.push(g.value.ciName),N.value=g.value.ciName),Z(t).then(()=>{pe(),z.value=t,h({type:"success",message:c("已切换到用户")+": "+t})}))).catch(a=>{console.error("获取用户数据失败:",a),h({type:"error",message:c("获取用户数据失败")})}))},Se=t=>{const a=t.userName;l.user=a,V.value=!1,a!==z.value&&(l.applicationType="",l.reason="",g.value=null,D.value=[],N.value="",l.ciName="申请新电脑",Promise.all([Z(a),oe(a),re(a)]).then(([r,v,y])=>{pe(),l.applicationType="",z.value=a,h({type:"success",message:c("已切换到用户")+": "+a})}).catch(r=>{console.error("获取用户数据失败:",r),h({type:"error",message:c("获取用户数据失败")})}))},ue=t=>{const a=document.querySelector(".user-input-container");a&&!a.contains(t.target)&&(V.value=!1)},te=()=>{q.value=!0;const t={pageNum:B.value,pageSize:K.value};F.post("/sysApply/getApplyList",t).then(a=>{Q.value=a.data.list||[],n.value=a.data.total||0,_.value=Q.value}).catch(a=>{console.error("获取申请列表失败:",a),h.error("获取申请列表失败")}).finally(()=>{q.value=!1})},we=()=>{f.value.validate(t=>{if(t){q.value=!0,g.value&&g.value.pcClass&&(l.reason=`${l.reason}
${c("电脑归属情况")}：${g.value.pcClass}`);const a=me(l.applicationType);let r=l.companySys;r.includes("是")?r="是":r.includes("否")&&(r="否");const v={deviceCategory:a,deviceType:l.deviceType,costCenter:l.costCenter,company:l.company,userName:l.user,responsibilityName:l.responsible,deviceSituation:l.computerCondition,companySystem:r,reason:l.reason,ciName:l.ciName,...l,companySys:r};console.log(c("提交的申请数据")+":",v),F.post("/sysApply/submitApply",v,{headers:{"Content-Type":"application/json"}}).then(y=>{h({type:"success",message:c("申请提交成功")}),de(),B.value=1,te()}).catch(y=>{console.error(c("提交申请失败")+":",y),h({type:"error",message:c("申请提交失败")})}).finally(()=>{q.value=!1})}else return h({type:"warning",message:c("请完成表单填写")}),!1})},de=()=>{f.value&&f.value.resetFields(),l.user=z.value,l.computerCondition="新电脑",l.companySys="是（公司系统）",l.ciName="申请新电脑",z.value&&Z(z.value)},pe=()=>{const t=l.user,a=l.costCenter,r=l.company,v=l.responsible,A={applicationType:"",deviceType:l.deviceType,costCenter:a,company:r,user:t,responsible:v,computerCondition:"新电脑",companySys:"是（公司系统）",reason:"",ciName:"申请新电脑"};Object.keys(l).forEach(I=>{l[I]=A[I]})},ze=t=>{j.value=t,ye.value=!0},Pe=t=>{j.value=t,F.get("/sysApply/getApproversByAprrovalId",{params:{approvalId:t.approvalId}}).then(a=>{const r=a.data.list,v=r.status1||"",y=r.status2||"";let A=r.status2||c("待审批");v==="审批不通过"&&(y==="审批中"||y==="待审批")&&(A="上一级审批不通过，审批流程终止"),P.value=[{title:"已提交",description:r.username||"未知用户",status:"已提交"},{title:"审批人1",description:r.approver1||c("暂无审批"),status:r.status1||c("待审批"),updatedAt:r.updatedAt1||"",approvalReason:r.approvalReason1||""},{title:"审批人2",description:r.approver2||c("暂无批准"),status:A,updatedAt:r.updatedAt2||"",approvalReason:r.approvalReason2||""},{title:"完成",description:"",status:t.status||"处理中"}];let I=0;v==="待审批"||v==="审批中"?I=1:v==="审批通过"&&(y==="待审批"||y==="审批中")?I=2:v==="审批通过"&&y==="审批通过"||v==="审批通过"&&y==="审批不通过"||v==="审批不通过"||t.status==="审批通过"||t.status==="已通过"||t.status==="审批不通过"||t.status==="已驳回"?I=3:I=0,U.value=I,W.value=!0}).catch(a=>{console.error("获取审批进度失败:",a),h({type:"error",message:c("获取审批进度失败")})})},Ae=t=>{var ge;const a=((ge=j.value)==null?void 0:ge.status)||"",r=U.value,v=t===P.value.length-1;let y="",A="";if(P.value&&P.value.length>1&&(y=P.value[1].status||"",P.value.length>2&&(A=P.value[2].status||"")),y==="审批不通过"||A==="审批不通过"||a==="审批不通过"||a==="已驳回"){const ve=y==="审批不通过"?1:A==="审批不通过"?2:3;return v||t===ve||t>ve?"error":"success"}else return y==="审批通过"&&A==="审批通过"||a==="审批通过"||a==="已通过"||t<r?"success":t===r?"process":"wait"},Te=t=>{switch(t){case"已提交":return 0;case"审批中":return 1;case"审核中":return 2;case"审批通过":return 3;case"审批不通过":return 3;case"已通过":return 3;case"已驳回":return 3;default:return 0}},Ne=t=>{switch(t){case"审批中":return"primary";case"审批通过":return"success";case"审批不通过":return"danger";case"已通过":return"success";case"已驳回":return"danger";default:return"info"}},me=t=>({pcRenewalOverSixYears:"办公电脑超六年换新",pcRenewalUnderSixYears:"办公电脑未超六年换新",pcRenewalUnderSixYearsOld:"办公电脑未超六年换旧",secretaryNewEmployee:"秘书代申请新岗位员工电脑",secretaryReplacement:"秘书代申请替代岗位员工电脑",secretaryIntern:"秘书代申请新实习生/外服电脑",publicComputer:"申请公共电脑",specialPurpose:"其他用途电脑申请",officePcRenewal:"办公电脑换新",newEmployeePc:"新正式员工电脑",internPc:"新实习生/外服电脑",otherPurpose:"其他用途电脑"})[t]||t,ke=t=>({"Standard Notebook":"Standard Notebook","Performance Notebook":"Performance Notebook","Standard Desktop":"Standard Desktop","Performance Desktop":"Performance Desktop",normalLaptop:"Standard Notebook",workstationLaptop:"Performance Notebook",normalDesktop:"Standard Desktop",workstationDesktop:"Performance Desktop"})[t]||t,g=b(null),ae=t=>{switch(t){case"SGCS":return"69F105";case"SGCC":return"69D163";case"SES":return"80A105";default:return"69F105"}},oe=t=>t?F({method:"get",url:"/sysControl/getInternalComputerByUserName",params:{userName:t}}).then(a=>{if(a.data){if(g.value=a.data,a.data.ciName&&(N.value=a.data.ciName,l.ciName=a.data.ciName,D.value.includes(a.data.ciName)||D.value.push(a.data.ciName)),a.data.deviceClass){const r=a.data.deviceClass.trim();["Standard Notebook","Performance Notebook","Standard Desktop","Performance Desktop"].includes(r)?l.deviceType=r:r.toLowerCase().includes("notebook")||r.toLowerCase().includes("laptop")?r.toLowerCase().includes("performance")||r.toLowerCase().includes("high")?l.deviceType="Performance Notebook":l.deviceType="Standard Notebook":(r.toLowerCase().includes("desktop")||r.toLowerCase().includes("pc"))&&(r.toLowerCase().includes("performance")||r.toLowerCase().includes("high")?l.deviceType="Performance Desktop":l.deviceType="Standard Desktop")}l.applicationType==="officePcRenewal"&&De(),l.applicationType="",a.data.pcClass&&a.data.pcClass.includes("Public Use")&&(l.applicationType="specialPurpose",l.reason="",h({type:"info",message:c("当前电脑归属情况为Public Use，已自动设置为其他用途电脑申请且无法修改")}),le()),a.data.ntAccount?Z(a.data.ntAccount).then(()=>{h({type:"success",message:c("已更新用户信息和电脑")+": "+a.data.ciName})}).catch(r=>{console.error("获取用户信息失败:",r),h({type:"success",message:c("已切换到电脑")+": "+a.data.ciName+"，"+c("但用户信息更新失败")})}):h({type:"success",message:c("已切换到电脑")+": "+a.data.ciName})}else g.value=null,N.value="";return a}).catch(a=>(h({type:"warning",message:c("获取电脑信息失败")}),g.value=null,N.value="",Promise.reject(a))):Promise.reject(new Error("用户名为空")),Ue=()=>{const t=l.applicationType;if(t){if((!g.value||!g.value.lifeCycleStart)&&(t==="pcRenewalOverSixYears"||t==="pcRenewalUnderSixYears"||t==="pcRenewalUnderSixYearsOld")){h({type:"warning",message:c("未找到当前电脑的出厂时间信息，无法判断使用年限")}),l.applicationType="";return}if(t==="pcRenewalOverSixYears"||t==="pcRenewalUnderSixYears"||t==="pcRenewalUnderSixYearsOld"){const a=g.value.lifeCycleStart;let r;try{if(a.includes("-"))r=new Date(a);else if(a.includes("/")){const A=a.split("/");A.length===3&&(r=new Date(A[2],A[0]-1,A[1]))}}catch(A){console.error("日期解析错误:",A),h({type:"error",message:c("无法解析电脑生命周期开始日期")}),l.applicationType="";return}if(!r||isNaN(r.getTime())){h({type:"warning",message:c("无法确定电脑使用年限，请联系IT部门")}),l.applicationType="";return}const y=new Date().getFullYear()-r.getFullYear();if(t==="pcRenewalOverSixYears")if(y<6){se.alert(c(`当前电脑使用年限为${y}年，未超过六年，不能选择"办公电脑超六年换新"`),c("年限不符合要求"),{confirmButtonText:c("确定"),type:"warning"}).then(()=>{l.applicationType=""}).catch(()=>{l.applicationType=""});return}else l.costCenter=ae(l.company),l.computerCondition="新电脑",l.reason="办公电脑超六年换新";else if(t==="pcRenewalUnderSixYears"||t==="pcRenewalUnderSixYearsOld")if(y>=6){se.alert(c(`当前电脑使用年限为${y}年，已超过六年，不能选择"办公电脑未超六年换新/换旧"`),c("年限不符合要求"),{confirmButtonText:c("确定"),type:"warning"}).then(()=>{l.applicationType=""}).catch(()=>{l.applicationType=""});return}else t==="pcRenewalUnderSixYears"?se.alert(c("需要更换的电脑未超过6年，该电脑更换费用将计入电脑使用人所属部门的成本中心"),c("费用提示"),{confirmButtonText:c("确定"),type:"warning"}).then(()=>{l.costCenter=g.value.costCenter||"",l.computerCondition="新电脑",l.reason="办公电脑未超六年换新"}).catch(()=>{}):(l.costCenter=ae(l.company),l.computerCondition="库存旧电脑",l.reason="办公电脑未超六年换旧")}else switch(t){case"secretaryNewEmployee":l.costCenter=ae(l.company),l.computerCondition="新电脑",l.reason="秘书代申请新岗位员工电脑";break;case"secretaryReplacement":l.costCenter=ae(l.company),l.computerCondition="库存旧电脑",l.reason="秘书代申请替代岗位员工电脑";break;case"secretaryIntern":l.costCenter=ae(l.company),l.computerCondition="库存旧电脑",l.reason="秘书代申请新实习生/外服电脑";break;case"specialPurpose":l.costCenter="",l.reason="",le();break}}},De=()=>{const t=g.value.lifeCycleStart;let a;try{if(t.includes("-"))a=new Date(t);else if(t.includes("/")){const y=t.split("/");y.length===3&&(a=new Date(y[2],y[0]-1,y[1]))}}catch(y){console.error("日期解析错误:",y),h({type:"error",message:"无法解析电脑生命周期开始日期"});return}if(!a||isNaN(a.getTime())){h({type:"warning",message:"无法确定电脑使用年限，请联系IT部门"});return}const v=new Date().getFullYear()-a.getFullYear();v>=6?(l.costCenter="IT",h({type:"success",message:`电脑使用已超过${v}年，符合换新条件，成本中心已自动设置为IT`})):se.confirm(`当前电脑使用年限为${v}年，未超六年，年限内换新是否本部门承担新电脑费用（包括换成其他类型的新电脑）？`,"提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).catch(()=>{l.applicationType=""})},he=()=>{const t=l.user;if(!t||t.trim()===""){V.value=!1;return}F.get("/sysApply/searchUsers",{params:{query:t}}).then(a=>{a.data&&Array.isArray(a.data.list)&&a.data.list.length>0?(T.value=a.data.list,V.value=!0):(T.value=[],V.value=!0)}).catch(a=>{console.error("搜索用户失败:",a),T.value=[],V.value=!0})},ye=b(!1),j=b(null),Re=()=>{var v;const t=((v=j.value)==null?void 0:v.status)||"";let a="",r="";return P.value&&P.value.length>1&&(a=P.value[1].status||"",P.value.length>2&&(r=P.value[2].status||"")),a==="审批不通过"||r==="审批不通过"||t==="审批不通过"||t==="已驳回"?"error":a==="审批通过"&&r==="审批通过"||t==="审批通过"||t==="已通过"?"success":"process"},Ve=t=>{K.value=t,B.value=1,te()},Ie=t=>{B.value=t,te()},xe=()=>{te()},Le=t=>{switch(t){case"审批通过":case"已通过":return"status-success";case"审批不通过":case"已驳回":return"status-error";case"审批中":case"待审批":return"status-process";default:return"status-info"}},Fe=t=>{switch(t){case"审批通过":case"已通过":return"el-icon-check-circle";case"审批不通过":case"已驳回":return"el-icon-close-circle";case"审批中":case"待审批":return"el-icon-loading";default:return"el-icon-info-circle"}},re=t=>t?F({method:"get",url:"/sysControl/getComputerListByUserName",params:{userName:t}}).then(a=>(a.data&&a.data.list&&a.data.list.length>0?(D.value=a.data.list,a.data.list.length>0&&(N.value=a.data.list[0],l.ciName=a.data.list[0])):(D.value=[],N.value="",l.ciName="申请新电脑"),a)).catch(a=>(h({type:"warning",message:"获取电脑列表失败"}),D.value=[],N.value="",l.ciName="申请新电脑",Promise.reject(a))):Promise.reject(new Error("用户名为空")),Ee=t=>{if(!t){l.ciName="申请新电脑";return}l.ciName=t,N.value=t,F({method:"get",url:"/sysControl/getComputerInfoByCiName",params:{ciName:t}}).then(a=>{if(a.data){if(g.value=a.data,a.data.deviceClass){const r=a.data.deviceClass.trim();["Standard Notebook","Performance Notebook","Standard Desktop","Performance Desktop"].includes(r)?l.deviceType=r:r.toLowerCase().includes("notebook")||r.toLowerCase().includes("laptop")?r.toLowerCase().includes("performance")||r.toLowerCase().includes("high")?l.deviceType="Performance Notebook":l.deviceType="Standard Notebook":(r.toLowerCase().includes("desktop")||r.toLowerCase().includes("pc"))&&(r.toLowerCase().includes("performance")||r.toLowerCase().includes("high")?l.deviceType="Performance Desktop":l.deviceType="Standard Desktop")}l.applicationType="",a.data.pcClass&&a.data.pcClass.includes("Public Use")&&(l.applicationType="specialPurpose",l.reason="",h({type:"info",message:c("当前电脑归属情况为Public Use，已自动设置为其他用途电脑申请且无法修改")}),le()),a.data.ntAccount?Z(a.data.ntAccount).then(()=>{h({type:"success",message:c("已更新用户信息和电脑")+": "+a.data.ciName})}).catch(r=>{console.error("获取用户信息失败:",r),h({type:"success",message:c("已切换到电脑")+": "+a.data.ciName+"，"+c("但用户信息更新失败")})}):h({type:"success",message:c("已切换到电脑")+": "+a.data.ciName})}}).catch(a=>{console.error("获取电脑信息失败:",a),h({type:"error",message:c("获取电脑信息失败")})})},le=()=>{F({method:"get",url:"/sysApply/getCostCenterList"}).then(t=>{t.data&&t.data.list&&Array.isArray(t.data.list)?O.value=t.data.list.filter(a=>a!=="IT"):(h({type:"warning",message:"成本中心列表为空"}),O.value=[])}).catch(t=>{console.error("获取成本中心列表失败:",t),h({type:"error",message:"获取成本中心列表失败"}),O.value=[]})};Xe(()=>{var t;!z.value&&((t=e.userInfo)!=null&&t.userName)&&(z.value=e.userInfo.userName,l.user=z.value),z.value?oe(z.value).then(()=>re(z.value)).then(()=>(g.value&&g.value.ciName&&(D.value.includes(g.value.ciName)||D.value.push(g.value.ciName),N.value=g.value.ciName),Z(z.value))).catch(a=>{console.error("初始化获取数据失败:",a)}):h({type:"warning",message:"未能获取当前用户信息，请手动填写"}),le(),te(),document.addEventListener("click",ue)}),Ze(()=>{document.removeEventListener("click",ue)});const Ye=x(()=>{const t=l.applicationType;return["pcRenewalOverSixYears","pcRenewalUnderSixYears","pcRenewalUnderSixYearsOld","secretaryNewEmployee","secretaryReplacement","secretaryIntern","publicComputer"].includes(t)}),Oe=x(()=>l.applicationType!=="specialPurpose"&&l.applicationType!==""),Be=x(()=>{var t,a;return((a=(t=g.value)==null?void 0:t.pcClass)==null?void 0:a.includes("Public Use"))&&l.applicationType==="specialPurpose"}),je=x(()=>{var t,a;return(a=(t=g.value)==null?void 0:t.pcClass)==null?void 0:a.includes("Public Use")}),Me=x(()=>l.applicationType!==""&&l.applicationType!=="specialPurpose"),qe=x(()=>{var t,a;return l.applicationType==="specialPurpose"||(a=(t=g.value)==null?void 0:t.pcClass)!=null&&a.includes("Public Use")&&l.applicationType==="specialPurpose"?"请输入其他用途电脑申请理由":"请输入申请理由"});return{applicationForm:l,applicationFormRef:f,rules:Y,applicationList:Q,loading:q,costCenters:O,companies:R,responsiblePersons:$,approvalProgressDialogVisible:W,approvalProgress:P,approvalProgressStep:U,applicationDetailDialogVisible:ye,currentApplication:j,handleApplicationTypeChange:Ue,submitApplication:we,resetForm:de,confirmUserChange:_e,viewApplicationDetails:ze,viewApprovalProgress:Pe,viewAssignProgress:t=>{j.value=t;let a=[],r=0;a=[{title:"分配中",description:"设备正在分配中"},{title:"分配完成",description:"设备已完成分配"}],t.assignStatus==="暂分配"?(a.splice(1,0,{title:"暂分配",description:"设备暂时分配"}),r=1):t.assignStatus==="分配完成"?r=a.length-1:r=0,G.value=a,X.value=r,L.value=!0},statusTagType:Ne,getApplicationTypeName:me,getDeviceTypeName:ke,userSearchResults:T,showUserResults:V,handleUserInput:be,handleUserBlur:Ce,searchUser:he,selectUser:Se,myComputer:g,computerList:D,selectedComputer:N,handleComputerSelect:Ee,currentPage:B,pageSize:K,totalItems:n,paginatedList:_,handleSizeChange:Ve,handleCurrentChange:Ie,refreshApplyList:xe,getApprovalStep:Te,getStepStatus:Ae,getStatusClass:Le,getStatusIcon:Fe,getProcessStatus:Re,assignProgressDialogVisible:L,assignProgress:G,assignProgressStep:X,isReasonDisabled:Ye,isCostCenterDisabled:Oe,isApplicationTypeDisabled:Be,isPublicUseComputer:je,reasonPlaceholder:qe,formatDate:ce,getAssignStatusTagType:t=>{switch(t){case"分配完成":return"success";case"暂分配":return"warning";case"分配中":return"primary";default:return"primary"}},getAssignProcessStatus:()=>{var a;const t=((a=j.value)==null?void 0:a.assignStatus)||"";return t==="分配完成"?"success":t==="暂分配"?"warning":"process"},getAssignStepStatus:t=>{var r;(r=j.value)!=null&&r.assignStatus;const a=X.value;return t<a?"success":t===a?"process":"wait"},getAssignStatusClass:t=>{switch(t){case"分配完成":return"status-success";case"暂分配":return"status-process";case"分配中":default:return"status-info"}},getAssignStatusIcon:t=>{switch(t){case"分配完成":return"el-icon-check-circle";case"暂分配":return"el-icon-warning";case"分配中":default:return"el-icon-loading"}},isComputerConditionDisabled:Me,t:c}}},ie=E=>($e("data-v-90e568cc"),E=E(),et(),E),at={style:{padding:"20px"}},lt={class:"title-with-select"},st={key:0,class:"my-computer-container"},nt={key:1,class:"no-computer-data"},ot={class:"user-input-container"},rt={key:0,class:"user-results-dropdown"},it={key:0},ct=["onClick"],ut={key:1,class:"no-results"},dt={class:"table-header"},pt={class:"section-title"},mt=ie(()=>p("i",{class:"el-icon-refresh"},null,-1)),ht={style:{"text-align":"center"}},yt={style:{"text-align":"center",display:"flex","justify-content":"center"}},ft={class:"pagination-container"},gt={key:0,class:"approval-progress-container custom-steps"},vt={class:"step-description"},bt={key:2,class:"step-update-time"},Ct={key:3,class:"step-reason"},_t={key:0,class:"approval-status-detail"},St={class:"status-icon"},wt={class:"status-text"},zt={class:"status-value"},Pt={class:"dialog-footer"},At={key:0,class:"approval-progress-container custom-steps"},Tt={class:"step-description"},Nt={key:0,class:"approval-status-detail"},kt={class:"status-icon"},Ut={class:"status-text"},Dt={class:"status-value"},Rt={class:"dialog-footer"},Vt={key:0,class:"application-detail-container"},It={class:"detail-header"},xt={class:"application-title"},Lt={class:"computer-name"},Ft={class:"application-info"},Et={class:"info-item"},Yt=ie(()=>p("i",{class:"el-icon-user"},null,-1)),Ot={class:"info-item"},Bt=ie(()=>p("i",{class:"el-icon-date"},null,-1)),jt={class:"detail-content"},Mt={class:"reason-section"},qt={class:"reason-title"},Gt={class:"reason-content"},Kt={class:"approval-actions"};function Ht(E,d,ne,e,z,c){const l=S("el-option"),Y=S("el-select"),f=S("el-descriptions-item"),Q=S("el-descriptions"),q=S("el-empty"),W=S("el-card"),P=S("el-input"),U=S("el-form-item"),L=S("el-col"),G=S("el-radio"),X=S("el-radio-group"),O=S("el-row"),R=S("el-button"),$=S("el-form"),T=S("el-table-column"),V=S("el-tag"),ee=S("el-table"),D=S("el-pagination"),N=S("el-step"),B=S("el-steps"),K=S("el-dialog");return m(),C("div",at,[s(W,{shadow:"never",class:"usr_card_override top"},{default:o(()=>[p("div",lt,[p("h3",null,i(e.t("我的电脑")),1),s(Y,{modelValue:e.selectedComputer,"onUpdate:modelValue":d[0]||(d[0]=n=>e.selectedComputer=n),placeholder:e.t("名下电脑选择"),onChange:e.handleComputerSelect,style:{width:"200px"}},{default:o(()=>[(m(!0),C(H,null,J(e.computerList,n=>(m(),k(l,{key:n,label:n,value:n},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder","onChange"])]),e.myComputer?(m(),C("div",st,[s(Q,{column:3,border:"",size:"small",class:"elegant-descriptions","label-width":120,"content-width":200},{default:o(()=>[s(f,{label:e.t("电脑名称"),width:"300"},{default:o(()=>[u(i(e.myComputer.ciName),1)]),_:1},8,["label"]),s(f,{label:e.t("NT账号"),width:"300"},{default:o(()=>[u(i(e.myComputer.ntAccount),1)]),_:1},8,["label"]),s(f,{label:e.t("部门号"),width:"300"},{default:o(()=>[u(i(e.myComputer.department),1)]),_:1},8,["label"]),s(f,{label:e.t("姓"),width:"300"},{default:o(()=>[u(i(e.myComputer.lastName),1)]),_:1},8,["label"]),s(f,{label:e.t("名"),width:"300"},{default:o(()=>[u(i(e.myComputer.firstName),1)]),_:1},8,["label"]),s(f,{label:e.t("电脑使用状态"),width:"300"},{default:o(()=>[u(i(e.myComputer.pcStatus),1)]),_:1},8,["label"]),e.myComputer.pcClass?(m(),k(f,{key:0,label:e.t("电脑归属情况"),width:"300"},{default:o(()=>[u(i(e.myComputer.pcClass),1)]),_:1},8,["label"])):w("",!0),s(f,{label:e.t("电脑情况备注"),width:"300"},{default:o(()=>[u(i(e.myComputer.comment),1)]),_:1},8,["label"]),s(f,{label:e.t("出厂时间"),width:"300"},{default:o(()=>[u(i(e.formatDate(e.myComputer.lifeCycleStart)),1)]),_:1},8,["label"]),e.myComputer.manufacturer?(m(),k(f,{key:1,label:e.t("制造商"),width:"300"},{default:o(()=>[u(i(e.myComputer.manufacturer),1)]),_:1},8,["label"])):w("",!0),e.myComputer.model?(m(),k(f,{key:2,label:e.t("型号"),width:"300"},{default:o(()=>[u(i(e.myComputer.model),1)]),_:1},8,["label"])):w("",!0),e.myComputer.assetTag?(m(),k(f,{key:3,label:e.t("资产标签"),width:"300"},{default:o(()=>[u(i(e.myComputer.assetTag),1)]),_:1},8,["label"])):w("",!0),e.myComputer.ipAddress?(m(),k(f,{key:4,label:e.t("IP地址"),width:"300"},{default:o(()=>[u(i(e.myComputer.ipAddress),1)]),_:1},8,["label"])):w("",!0),e.myComputer.macAddress?(m(),k(f,{key:5,label:e.t("MAC地址"),width:"300"},{default:o(()=>[u(i(e.myComputer.macAddress),1)]),_:1},8,["label"])):w("",!0),e.myComputer.os?(m(),k(f,{key:6,label:e.t("操作系统"),width:"300"},{default:o(()=>[u(i(e.myComputer.os),1)]),_:1},8,["label"])):w("",!0)]),_:1})])):(m(),C("div",nt,[s(q,{description:e.t("暂无电脑信息")},null,8,["description"])]))]),_:1}),s(W,{shadow:"never",class:"usr_card_override top"},{default:o(()=>[p("h3",null,i(e.t("电脑申请")),1),s($,{model:e.applicationForm,ref:"applicationFormRef","label-width":"150px",class:"application-form",rules:e.rules},{default:o(()=>[s(O,{gutter:20},{default:o(()=>[s(L,{span:12},{default:o(()=>[s(U,{label:e.t("使用人"),prop:"user"},{default:o(()=>[p("div",ot,[s(P,{modelValue:e.applicationForm.user,"onUpdate:modelValue":d[1]||(d[1]=n=>e.applicationForm.user=n),placeholder:e.t("请输入使用人的NT账号或姓名"),style:{width:"100%"},clearable:"",onInput:e.handleUserInput,onBlur:e.handleUserBlur,onKeyup:Ke(e.confirmUserChange,["enter"])},null,8,["modelValue","placeholder","onInput","onBlur","onKeyup"]),e.showUserResults?(m(),C("div",rt,[e.userSearchResults.length>0?(m(),C("div",it,[(m(!0),C(H,null,J(e.userSearchResults,(n,_)=>(m(),C("div",{key:_,class:"user-result-item",onClick:ce=>e.selectUser(n)},i(n.userName)+" "+i(n.userNick?`(${n.userNick})`:""),9,ct))),128))])):(m(),C("div",ut,i(e.t("未找到相关用户")),1))])):w("",!0)])]),_:1},8,["label"])]),_:1}),s(L,{span:12},{default:o(()=>[s(U,{label:e.t("成本中心"),prop:"costCenter"},{default:o(()=>[s(Y,{modelValue:e.applicationForm.costCenter,"onUpdate:modelValue":d[2]||(d[2]=n=>e.applicationForm.costCenter=n),placeholder:e.t("请选择成本中心"),style:{width:"100%"},disabled:e.isCostCenterDisabled},{default:o(()=>[(m(!0),C(H,null,J(e.costCenters,n=>(m(),k(l,{key:n,label:n,value:n},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder","disabled"])]),_:1},8,["label"])]),_:1}),s(L,{span:12},{default:o(()=>[s(U,{label:e.t("所属公司"),prop:"company"},{default:o(()=>[s(Y,{modelValue:e.applicationForm.company,"onUpdate:modelValue":d[3]||(d[3]=n=>e.applicationForm.company=n),placeholder:e.t("请选择所属公司"),style:{width:"100%"}},{default:o(()=>[(m(!0),C(H,null,J(e.companies,n=>(m(),k(l,{key:n,label:n,value:n},null,8,["label","value"]))),128)),s(l,{label:"SGCS",value:"SGCS"}),s(l,{label:"SGCC",value:"SGCC"}),s(l,{label:"SES",value:"SES"})]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),s(L,{span:12},{default:o(()=>[s(U,{label:e.t("责任人"),prop:"responsible"},{default:o(()=>[s(Y,{modelValue:e.applicationForm.responsible,"onUpdate:modelValue":d[4]||(d[4]=n=>e.applicationForm.responsible=n),placeholder:e.t("请选择责任人"),style:{width:"100%"}},{default:o(()=>[(m(!0),C(H,null,J(e.responsiblePersons,n=>(m(),k(l,{key:n,label:n,value:n},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),s(L,{span:12},{default:o(()=>[s(U,{label:e.t("申请类别"),prop:"applicationType"},{default:o(()=>[s(Y,{modelValue:e.applicationForm.applicationType,"onUpdate:modelValue":d[5]||(d[5]=n=>e.applicationForm.applicationType=n),placeholder:e.t("请选择申请类别"),style:{width:"100%"},onChange:e.handleApplicationTypeChange,disabled:e.isApplicationTypeDisabled},{default:o(()=>[s(l,{label:e.t("办公电脑超六年换新"),value:"pcRenewalOverSixYears",disabled:e.isPublicUseComputer},null,8,["label","disabled"]),s(l,{label:e.t("办公电脑未超六年换新"),value:"pcRenewalUnderSixYears",disabled:e.isPublicUseComputer},null,8,["label","disabled"]),s(l,{label:e.t("办公电脑未超六年换旧"),value:"pcRenewalUnderSixYearsOld",disabled:e.isPublicUseComputer},null,8,["label","disabled"]),s(l,{label:e.t("秘书代申请新岗位员工电脑"),value:"secretaryNewEmployee",disabled:e.isPublicUseComputer},null,8,["label","disabled"]),s(l,{label:e.t("秘书代申请替代岗位员工电脑"),value:"secretaryReplacement",disabled:e.isPublicUseComputer},null,8,["label","disabled"]),s(l,{label:e.t("秘书代申请新实习生/外服电脑"),value:"secretaryIntern",disabled:e.isPublicUseComputer},null,8,["label","disabled"]),s(l,{label:e.t("其他用途电脑申请"),value:"specialPurpose"},null,8,["label"])]),_:1},8,["modelValue","placeholder","onChange","disabled"])]),_:1},8,["label"])]),_:1}),s(L,{span:12},{default:o(()=>[s(U,{label:e.t("电脑类型"),prop:"deviceType"},{default:o(()=>[s(Y,{modelValue:e.applicationForm.deviceType,"onUpdate:modelValue":d[6]||(d[6]=n=>e.applicationForm.deviceType=n),placeholder:e.t("请选择电脑类型"),style:{width:"100%"}},{default:o(()=>[s(l,{label:"Standard Notebook",value:"Standard Notebook"}),s(l,{label:"Performance Notebook",value:"Performance Notebook"}),s(l,{label:"Standard Desktop",value:"Standard Desktop"}),s(l,{label:"Performance Desktop",value:"Performance Desktop"})]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),s(L,{span:12},{default:o(()=>[s(U,{label:e.t("电脑情形"),prop:"computerCondition"},{default:o(()=>[s(X,{modelValue:e.applicationForm.computerCondition,"onUpdate:modelValue":d[7]||(d[7]=n=>e.applicationForm.computerCondition=n),disabled:e.isComputerConditionDisabled},{default:o(()=>[s(G,{label:"新电脑"},{default:o(()=>[u(i(e.t("新电脑")),1)]),_:1}),s(G,{label:"库存旧电脑"},{default:o(()=>[u(i(e.t("库存旧电脑")),1)]),_:1})]),_:1},8,["modelValue","disabled"])]),_:1},8,["label"])]),_:1}),s(L,{span:12},{default:o(()=>[s(U,{label:e.t("公司系统"),prop:"companySys"},{default:o(()=>[s(X,{modelValue:e.applicationForm.companySys,"onUpdate:modelValue":d[8]||(d[8]=n=>e.applicationForm.companySys=n)},{default:o(()=>[s(G,{label:"是（公司系统）"},{default:o(()=>[u(i(e.t("是（公司系统）")),1)]),_:1}),s(G,{label:"否（非标系统）",disabled:""},{default:o(()=>[u(i(e.t("否（非标系统）")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["label"])]),_:1}),s(L,{span:24},{default:o(()=>[s(U,{label:e.t("申请理由"),prop:"reason"},{default:o(()=>[s(P,{modelValue:e.applicationForm.reason,"onUpdate:modelValue":d[9]||(d[9]=n=>e.applicationForm.reason=n),placeholder:e.reasonPlaceholder,type:"textarea",rows:3,disabled:e.isReasonDisabled,style:{width:"100%"}},null,8,["modelValue","placeholder","disabled"])]),_:1},8,["label"])]),_:1})]),_:1}),s(U,null,{default:o(()=>[s(R,{type:"primary",onClick:e.submitApplication},{default:o(()=>[u(i(e.t("提交申请")),1)]),_:1},8,["onClick"]),s(R,{onClick:e.resetForm},{default:o(()=>[u(i(e.t("重置")),1)]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model","rules"])]),_:1}),s(W,{shadow:"never",class:"usr_card_override top",style:{"margin-top":"20px"}},{default:o(()=>[p("div",dt,[p("h3",pt,i(e.t("我的申请状态")),1),s(R,{type:"primary",size:"small",onClick:e.refreshApplyList},{default:o(()=>[mt,u(" "+i(e.t("刷新")),1)]),_:1},8,["onClick"])]),s(ee,{data:e.paginatedList,loading:e.loading,style:{width:"100%","overflow-x":"auto"},border:"",stripe:"","row-key":"approvalId","highlight-current-row":"","table-layout":"fixed",class:"application-table"},{default:o(()=>[s(T,{label:e.t("申请时间"),prop:"createdAt",width:"160"},null,8,["label"]),s(T,{label:e.t("使用人"),prop:"userName",width:"250"},null,8,["label"]),s(T,{label:e.t("责任人"),prop:"responsibilityName",width:"250"},null,8,["label"]),s(T,{label:e.t("电脑类型"),prop:"deviceType",width:"180"},{default:o(({row:n})=>[u(i(e.getDeviceTypeName(n.deviceType)),1)]),_:1},8,["label"]),s(T,{label:e.t("电脑名称"),prop:"ciName",width:"140"},{default:o(({row:n})=>[u(i(n.ciName||e.t("申请新电脑")),1)]),_:1},8,["label"]),s(T,{label:e.t("申请类别"),prop:"deviceCategory",width:"220"},{default:o(({row:n})=>[u(i(e.getApplicationTypeName(n.deviceCategory)),1)]),_:1},8,["label"]),s(T,{label:e.t("申请理由"),prop:"reason","min-width":"250","show-overflow-tooltip":""},null,8,["label"]),s(T,{label:e.t("更新时间"),prop:"updatedAt",width:"160"},null,8,["label"]),s(T,{label:e.t("状态"),prop:"status",width:"130",align:"center",fixed:"right"},{default:o(({row:n})=>[p("div",ht,[s(V,{type:e.statusTagType(n.status),onClick:_=>e.viewApprovalProgress(n)},{default:o(()=>[u(i(e.t(n.status)),1)]),_:2},1032,["type","onClick"]),n.status==="审批通过"||n.status==="已通过"?(m(),k(V,{key:0,type:e.getAssignStatusTagType(n.assignStatus),style:{"margin-top":"5px",cursor:"pointer"},onClick:_=>e.viewAssignProgress(n)},{default:o(()=>[u(i(e.t(n.assignStatus||"分配中")),1)]),_:2},1032,["type","onClick"])):w("",!0)])]),_:1},8,["label"]),s(T,{label:e.t("操作"),width:"100",fixed:"right",align:"center"},{default:o(({row:n})=>[p("div",yt,[s(R,{type:"primary",text:"",onClick:_=>e.viewApplicationDetails(n)},{default:o(()=>[u(i(e.t("查看详情")),1)]),_:2},1032,["onClick"])])]),_:1},8,["label"])]),_:1},8,["data","loading"]),p("div",ft,[s(D,{"current-page":e.currentPage,"onUpdate:currentPage":d[10]||(d[10]=n=>e.currentPage=n),"page-size":e.pageSize,"onUpdate:pageSize":d[11]||(d[11]=n=>e.pageSize=n),"page-sizes":[5,10,20,50],small:!1,disabled:e.loading,background:!0,layout:"total, sizes, prev, pager, next, jumper",total:e.totalItems,onSizeChange:e.handleSizeChange,onCurrentChange:e.handleCurrentChange,"prev-text":e.t("上一页"),"next-text":e.t("下一页"),"popper-class":"pagination-popper"},null,8,["current-page","page-size","disabled","total","onSizeChange","onCurrentChange","prev-text","next-text"])])]),_:1}),s(K,{modelValue:e.approvalProgressDialogVisible,"onUpdate:modelValue":d[13]||(d[13]=n=>e.approvalProgressDialogVisible=n),title:e.t("审批进度"),width:"850px"},{footer:o(()=>[p("span",Pt,[s(R,{type:"primary",onClick:d[12]||(d[12]=n=>e.approvalProgressDialogVisible=!1)},{default:o(()=>[u(i(e.t("关闭")),1)]),_:1})])]),default:o(()=>[e.approvalProgress?(m(),C("div",gt,[s(B,{active:e.approvalProgressStep,"process-status":e.getProcessStatus(),"align-center":""},{default:o(()=>[(m(!0),C(H,null,J(e.approvalProgress,(n,_)=>(m(),k(N,{key:_,title:e.t(n.title),status:e.getStepStatus(_),class:M({"final-step":_===e.approvalProgress.length-1})},{description:o(()=>[p("div",vt,[p("div",null,i(n.description),1),_===1&&n.status?(m(),C("div",{key:0,class:M(["step-status",{"error-status":n.status==="审批不通过","success-status":n.status==="审批通过","warning-status":n.status.includes("上一级审批不通过")}])},i(e.t(n.status)),3)):w("",!0),_===2&&n.status?(m(),C("div",{key:1,class:M(["step-status",{"error-status":n.status==="审批不通过","success-status":n.status==="审批通过","warning-status":n.status.includes("上一级审批不通过")}])},i(e.t(n.status)),3)):w("",!0),(_===1||_===2)&&n.updatedAt?(m(),C("div",bt,i(e.t("更新时间"))+": "+i(n.updatedAt),1)):w("",!0),(_===1||_===2)&&n.approvalReason?(m(),C("div",Ct,i(e.t("审批理由"))+": "+i(n.approvalReason),1)):w("",!0)])]),_:2},1032,["title","status","class"]))),128))]),_:1},8,["active","process-status"]),e.currentApplication?(m(),C("div",_t,[p("div",{class:M(["status-box",e.getStatusClass(e.currentApplication.status)])},[p("div",St,[p("i",{class:M(e.getStatusIcon(e.currentApplication.status))},null,2)]),p("div",wt,[u(i(e.t("当前状态"))+": ",1),p("span",zt,i(e.t(e.currentApplication.status)),1)])],2)])):w("",!0)])):w("",!0)]),_:1},8,["modelValue","title"]),s(K,{modelValue:e.assignProgressDialogVisible,"onUpdate:modelValue":d[15]||(d[15]=n=>e.assignProgressDialogVisible=n),title:e.t("分配进度"),width:"700px"},{footer:o(()=>[p("span",Rt,[s(R,{type:"primary",onClick:d[14]||(d[14]=n=>e.assignProgressDialogVisible=!1)},{default:o(()=>[u(i(e.t("关闭")),1)]),_:1})])]),default:o(()=>[e.currentApplication?(m(),C("div",At,[s(B,{active:e.assignProgressStep,"process-status":e.getAssignProcessStatus(),"align-center":""},{default:o(()=>[(m(!0),C(H,null,J(e.assignProgress,(n,_)=>(m(),k(N,{key:_,title:e.t(n.title),status:e.getAssignStepStatus(_),class:M({"final-step":_===e.assignProgress.length-1})},{description:o(()=>[p("div",Tt,[p("div",null,i(e.t(n.description)),1)])]),_:2},1032,["title","status","class"]))),128))]),_:1},8,["active","process-status"]),e.currentApplication?(m(),C("div",Nt,[p("div",{class:M(["status-box",e.getAssignStatusClass(e.currentApplication.assignStatus)])},[p("div",kt,[p("i",{class:M(e.getAssignStatusIcon(e.currentApplication.assignStatus))},null,2)]),p("div",Ut,[u(i(e.t("当前状态"))+": ",1),p("span",Dt,i(e.t(e.currentApplication.assignStatus||"分配中")),1)])],2)])):w("",!0)])):w("",!0)]),_:1},8,["modelValue","title"]),s(K,{modelValue:e.applicationDetailDialogVisible,"onUpdate:modelValue":d[19]||(d[19]=n=>e.applicationDetailDialogVisible=n),title:"",width:"700px",class:"application-detail-dialog","destroy-on-close":""},{default:o(()=>[e.currentApplication?(m(),C("div",Vt,[p("div",It,[p("div",xt,[p("span",Lt,i(e.currentApplication.ciName||e.t("申请新电脑")),1),s(V,{class:"status-tag",type:e.statusTagType(e.currentApplication.status)},{default:o(()=>[u(i(e.t(e.currentApplication.status)),1)]),_:1},8,["type"])]),p("div",Ft,[p("span",Et,[Yt,u(" "+i(e.t("申请人"))+": "+i(e.currentApplication.userName),1)]),p("span",Ot,[Bt,u(" "+i(e.t("申请时间"))+": "+i(e.currentApplication.createdAt),1)])])]),p("div",jt,[s(Q,{column:2,border:"",size:"default",class:"detail-descriptions"},{default:o(()=>[s(f,{label:e.t("申请类别"),"label-class-name":"item-label","content-class-name":"item-content"},{default:o(()=>[u(i(e.getApplicationTypeName(e.currentApplication.deviceCategory)),1)]),_:1},8,["label"]),s(f,{label:e.t("电脑类型"),"label-class-name":"item-label","content-class-name":"item-content"},{default:o(()=>[u(i(e.getDeviceTypeName(e.currentApplication.deviceType)),1)]),_:1},8,["label"]),s(f,{label:e.t("成本中心"),"label-class-name":"item-label","content-class-name":"item-content"},{default:o(()=>[u(i(e.currentApplication.costCenter),1)]),_:1},8,["label"]),s(f,{label:e.t("所属公司"),"label-class-name":"item-label","content-class-name":"item-content"},{default:o(()=>[u(i(e.currentApplication.company),1)]),_:1},8,["label"]),s(f,{label:e.t("责任人"),"label-class-name":"item-label","content-class-name":"item-content"},{default:o(()=>[u(i(e.currentApplication.responsibilityName),1)]),_:1},8,["label"]),s(f,{label:e.t("电脑情形"),"label-class-name":"item-label","content-class-name":"item-content"},{default:o(()=>[u(i(e.currentApplication.deviceSituation),1)]),_:1},8,["label"]),s(f,{label:e.t("公司系统"),"label-class-name":"item-label","content-class-name":"item-content"},{default:o(()=>[u(i(e.currentApplication.companySystem),1)]),_:1},8,["label"]),s(f,{label:e.t("有效期"),"label-class-name":"item-label","content-class-name":"item-content"},{default:o(()=>[u(i(e.currentApplication.timestamp),1)]),_:1},8,["label"]),s(f,{label:e.t("更新时间"),"label-class-name":"item-label","content-class-name":"item-content"},{default:o(()=>[u(i(e.currentApplication.updatedAt),1)]),_:1},8,["label"])]),_:1}),p("div",Mt,[p("div",qt,i(e.t("申请理由")),1),p("div",Gt,i(e.currentApplication.reason),1)])]),p("div",Kt,[s(R,{type:"primary",onClick:d[16]||(d[16]=n=>e.applicationDetailDialogVisible=!1)},{default:o(()=>[u(i(e.t("关闭")),1)]),_:1}),s(R,{type:"info",onClick:d[17]||(d[17]=n=>e.viewApprovalProgress(e.currentApplication))},{default:o(()=>[u(i(e.t("查看审批进度")),1)]),_:1}),e.currentApplication.status==="审批通过"||e.currentApplication.status==="已通过"?(m(),k(R,{key:0,type:"success",onClick:d[18]||(d[18]=n=>e.viewAssignProgress(e.currentApplication))},{default:o(()=>[u(i(e.t("查看分配进度")),1)]),_:1})):w("",!0)])])):w("",!0)]),_:1},8,["modelValue"])])}const ta=Ge(tt,[["render",Ht],["__scopeId","data-v-90e568cc"]]);export{ta as default};
